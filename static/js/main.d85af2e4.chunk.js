(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[0],{68:function(n,e,t){},80:function(n,e,t){"use strict";t.r(e);var r,i,a,c,o,s,u,l,d,b,p,j,f,h,x,O,g,m,v,w,y,k,C,S,z,D,R,E,A,I,F,M,B=t(4),U=t.n(B),G=t(30),H=t.n(G),K=(t(68),t(9)),L=t(10),T=L.b.h1(r||(r=Object(K.a)(["\n  color: var(--primary);\n  font-size: 1.2rem;\n  letter-spacing: 2px;\n  font-weight: normal;\n"]))),W=L.b.p(i||(i=Object(K.a)(["\n    text-align: center;\n"]))),P=L.b.h2(a||(a=Object(K.a)(["\n    margin-top: 60px;\n    font-size: 2.6rem;\n"]))),Y=t(5),J=function(){return Object(Y.jsxs)("div",{children:[Object(Y.jsx)(T,{children:"Firegram"}),Object(Y.jsx)(P,{children:"Firebase Gallery"}),Object(Y.jsx)(W,{children:"A Firebase gallery made completely in the frontend. Hence, cropping images can result in loss in quality but it serves its purpose of uploading to and downloading from firebase via a reasonable UI"})]})},N=t(11),V=t(17),X=t(48),q=t(27),Q=Object(q.b)({name:"extra",initialState:{like:!1},reducers:{acceptReject:function(n){n.like=!n.like}}}),$=Q.actions.acceptReject,_=function(n){return n.extra.like},Z=Q.reducer,nn=t(43),en=t(42),tn=L.b.div(c||(c=Object(K.a)(["\n    display:flex;\n    top:0;\n    left:0;\n    width:100%;\n    position:absolute;\n    align-items:center;\n    justify-content:center;\n    height:100vh;\n"]))),rn=L.b.div(o||(o=Object(K.a)(["\nwidth:100%;\nheight:100vh;\nbackground-color:rgba(0,0,0,0.8);\nposition:fixed;\ndisplay:flex;\njustify-content:center;\nalign-items:center;\nz-index:100;\n"]))),an=L.b.div(s||(s=Object(K.a)(["\nwidth:65vw;\nheight:75vh;\nbox-shadow:0 5px 16px rgba(0,0,0,0.2);\nbackground:white;\ncolor:black;\nz-index:10;\nborder-radius:1rem;\ndisplay:flex;\njustify-content:center;\n"]))),cn=L.b.div(u||(u=Object(K.a)(["\n    width:100%;\n    height:100%;\n    display:flex;\n    flex-direction:column;\n    background-color:white;\n    border-radius:1rem;\n"]))),on=L.b.img(l||(l=Object(K.a)(["\n    object-fit:contain;\n    height:",";\n"])),(function(n){return"upload"===n.type?"90%":"80%"})),sn=L.b.div(d||(d=Object(K.a)(["\n    margin-top:0.2rem;\n    height:","\n"])),(function(n){return"upload"===n.type?"10%":"20%"})),un=L.b.span(b||(b=Object(K.a)(["\n    margin-left:5%;\n    font-size:16px;\n    font-weight:500;\n    font-style:italic;\n    display:block;\n"]))),ln=L.b.button(p||(p=Object(K.a)(["\n    font-size:1rem;\n    border-radius:10px;\n    margin-top:0.7rem;\n    padding:0.5rem 1rem;\n    outline:none;\n    cursor: pointer;\n    transition: 0.3s;\n    border:none;\n    transition: 0.3s;    \n    box-shadow: 0px 2px 6px 5px rgba(0,0,0,0.6);\n\n    :hover{\n        box-shadow: 0px 3px 8px 2px rgba(0,0,0,0.6);\n        transform: scale(1.1);\n    }\n\n    :active {\n        box-shadow: 0px 3px 6px 3px rgba(0,0,0,0.6);\n        transform: scale(1.05);\n    }\n"]))),dn=L.b.input(j||(j=Object(K.a)(["\n    height:100%;\n    width:100%;\n    padding:0.5rem 1rem;\n    font-size:1rem;\n    outline:none;\n    border:none;\n    border-bottom-right-radius:1rem;\n    border-bottom-left-radius:1rem;\n    box-sizing:border-box;\n    margin-top:1rem;\n"]))),bn=Object(L.a)(f||(f=Object(K.a)(["\n    position:absolute;\n    cursor: pointer;\n    right:20px;\n    width:32px;\n    height:32px;\n    padding:10px;\n    z-index:10;\n    background:white;\n    border-radius:999px;\n    box-shadow: 0px 2px 2px 2px rgba(0,0,0,0.6);\n    transition: 0.3s;\n"]))),pn=Object(L.b)(en.a)(h||(h=Object(K.a)(["\n    \n    bottom:20px;\n    color:blue;\n    border: 3px solid blue;\n    ","\n\n    :hover{\n        background:blue;\n        color:white;\n    }\n"])),bn),jn=Object(L.b)(nn.a)(x||(x=Object(K.a)(["\n    top:20px;\n    color:black;\n    border: 3px solid black;\n    ","\n\n    :hover{\n        background:black;\n        color:white;\n    }\n"])),bn),fn=Object(q.b)({name:"modal",initialState:{showCloseMd:!1},reducers:{switchModal:function(n){n.showCloseMd=!n.showCloseMd}}}),hn=fn.actions.switchModal,xn=function(n){return n.modal.showCloseMd},On=fn.reducer,gn=Object(q.b)({name:"image",initialState:{image:null,file:null,title:null,fx:null},reducers:{addImage:function(n,e){n.image=e.payload},addFile:function(n,e){n.file=e.payload},addFx:function(n,e){n.fx=e.payload},addTitle:function(n,e){n.title=e.payload}}}),mn=gn.actions,vn=mn.addImage,wn=mn.addFile,yn=mn.addTitle,kn=mn.addFx,Cn=function(n){return n.image.image},Sn=function(n){return n.image.file},zn=function(n){return n.image.title},Dn=function(n){return n.image.fx},Rn=gn.reducer,En=t(12),An=t.n(En),In=t(19),Fn=(t(75),t(61)),Mn=L.b.div(O||(O=Object(K.a)(["\n    height:100%;\n    width:100%;\n    padding:0 1rem;\n"]))),Bn=Object(L.b)(Fn.a)(g||(g=Object(K.a)(["\n    height:100%;\n    width:100%;\n"]))),Un=Object(L.b)(en.a)(m||(m=Object(K.a)(["\ncursor: pointer;\nposition:absolute;\nbottom:20px;\nright:20px;\nwidth:32px;\nheight:32px;\npadding:10px;\nz-index:10;\ncolor:blue;\nbackground:white;\nborder-radius:999px;\nborder: 3px solid blue;\nbox-shadow: 0px 2px 2px 2px rgba(0,0,0,0.6);\ntransition: 0.3s;\n\n:hover{\n    background:blue;\n    color:white;\n}\n"]))),Gn=L.b.div(v||(v=Object(K.a)(["\n    height:5px;\n    background: var(--primary);\n    margin-top:20px;\n"]))),Hn=t(36),Kn=(t(78),t(79),(Hn.a.apps.length?Hn.a.app():Hn.a.initializeApp({apiKey:"AIzaSyDR248wGDK2r9YyMXKWD8UPpRyz34vxGx8",authDomain:"firegram-a0f3e.firebaseapp.com",projectId:"firegram-a0f3e",storageBucket:"firegram-a0f3e.appspot.com",messagingSenderId:"582764977674",appId:"1:582764977674:web:1557c2cb435ce6a19049f3",measurementId:"G-6H45XRHKQD"})).firestore()),Ln=Hn.a.storage(),Tn=Hn.a.firestore.FieldValue.serverTimestamp,Wn=function(n){var e=Object(V.c)(zn),t=Object(B.useState)(null),r=Object(N.a)(t,2),i=r[0],a=r[1],c=Object(B.useState)(null),o=Object(N.a)(c,2),s=o[0],u=o[1],l=Object(B.useState)(null),d=Object(N.a)(l,2),b=d[0],p=d[1],j=Kn.collection("images");return Object(B.useEffect)((function(){var t=Ln.ref(e);t.put(n).on("state_changed",(function(n){var e=n.bytesTransferred/n.totalBytes*100;a(e)}),(function(n){u(n)}),Object(In.a)(An.a.mark((function n(){var r,i;return An.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getDownloadURL();case 2:r=n.sent,i=Tn(),j.add({url:r,createdAt:i,name:e}),p(r);case 6:case"end":return n.stop()}}),n)}))))}),[n]),{error:s,progress:i,url:b}},Pn=function(n){var e=n.cropData,t=void 0===e?null:e,r=Object(V.b)(),i=Object(V.c)(Cn),a=Wn(t||i),c=a.url,o=a.progress;return Object(B.useEffect)((function(){c&&i?(r($()),r(vn(null))):c&&t&&(r(wn(null)),r(kn(null)),r(hn()))}),[c,i,t]),Object(Y.jsx)(Gn,{style:{width:o+"%"}})},Yn=function(){var n=Object(In.a)(An.a.mark((function n(e,t){var r;return An.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=Kn.collection("images").doc(t),Ln.ref(e.name).delete().then((function(){r.delete().then((function(){return!0})).catch((function(n){console.error("Error removing document: ",n)}))})).catch((function(n){console.log("error",n)}));case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),Jn=L.b.div(w||(w=Object(K.a)(["\n    display:flex;\n    height:100%;\n    width:100%;  \n    justify-content:center; \n    align-items:center;\n"]))),Nn=L.b.div(y||(y=Object(K.a)(["\n    display:flex;\n    width:65%;\n    height:20%;\n    padding:0.5rem 1rem;\n    flex-direction: column;\n\n    >span{\n        margin:0.7rem auto;\n        font-size:24px;\n        font-weight:700;\n        animation-name: flicker;\n        animation-duration: 4s;\n        animation-iteration-count: infinite;\n\n        @keyframes flicker {\n            0% { opacity: 1; }\n            50% { opacity: 0.1; }\n            100% { opacity: 1; }\n        }\n    }\n"]))),Vn=function(n){var e=n.cropData,t=Object(V.c)(Sn),r=Object(B.useState)(!1),i=Object(N.a)(r,2),a=i[0],c=i[1];return Object(B.useEffect)((function(){c(function(){var n=Object(In.a)(An.a.mark((function n(){return An.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Yn(e,t.id);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}())}),[c]),Object(Y.jsx)(Jn,{children:a?Object(Y.jsxs)(Nn,{children:[Object(Y.jsx)("span",{children:"...Cropping..."}),Object(Y.jsx)(Pn,{cropData:e})]}):null})},Xn=function(){var n=Object(In.a)(An.a.mark((function n(e,t,r){return An.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=r||(e.match(/^data:([^;]+);/)||"")[1],n.abrupt("return",fetch(e).then((function(n){return n.arrayBuffer()})).then((function(n){return new File([n],t,{type:r})})));case 2:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),qn=function(n){var e=n.file,t=Object(B.useState)(null),r=Object(N.a)(t,2),i=r[0],a=r[1],c=Object(B.useState)(null),o=Object(N.a)(c,2),s=o[0],u=o[1],l=function(){var n=Object(In.a)(An.a.mark((function n(t){var r;return An.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),"undefined"===typeof s){n.next=6;break}return n.next=4,Xn(s.getCroppedCanvas().toDataURL(),e.name);case 4:r=n.sent,a(r);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(B.useEffect)((function(){}),[i]),Object(Y.jsxs)(Mn,{children:[i?Object(Y.jsx)(Vn,{cropData:i}):Object(Y.jsx)(Bn,{initialAspectRatio:1,src:e.url,viewMode:2,guides:!1,cropBoxResizable:!1,minCropBoxHeight:5,minCropBoxWidth:5,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,onInitialized:function(n){u(n)}}),i?null:Object(Y.jsx)(Un,{onClick:l})]})},Qn=function(n){var e,t,r=n.type,i=void 0===r?null:r,a=Object(V.b)(),c=Object(V.c)(xn),o=Object(V.c)(Dn),s=Object(V.c)(Sn),u=null===s||void 0===s||null===(e=s.createdAt)||void 0===e||null===(t=e.toDate())||void 0===t?void 0:t.toDateString(),l=Object(B.useState)(!0),d=Object(N.a)(l,2),b=d[0],p=d[1],j=Object(V.c)(Cn),f=Object(B.useState)(null),h=Object(N.a)(f,2),x=h[0],O=h[1],g=Object(B.useState)(null),m=Object(N.a)(g,2),v=m[0],w=m[1],y=Object(B.useRef)(),k=Object(B.useRef)(),C=Object(X.useSpring)({config:{duration:500},opacity:c?1:0,transform:c?"translateY(0%)":"translateY(-100%)"}),S=function(){a("upload"===i?vn(null):wn(null)),a(kn(null)),a(hn())};return Object(B.useEffect)((function(){if("crop"===o)p(!1);else if("upload"===i){p(!0);var n=new FileReader;n.onloadend=function(){w(n.result)},n.readAsDataURL(j)}else"display"===i&&(p(!1),a(vn(null)),w(s.url))}),[o,p,w,j]),Object(Y.jsx)(Y.Fragment,{children:c?Object(Y.jsx)(tn,{children:Object(Y.jsx)(rn,{ref:k,onClick:function(n){k.current===n.target&&S()},children:Object(Y.jsx)(X.animated.div,{style:C,children:Object(Y.jsxs)(an,{children:["crop"===o?Object(Y.jsx)(qn,{file:s}):Object(Y.jsxs)(cn,{children:[Object(Y.jsx)(on,{src:v,alt:"uploaded pic",type:i}),"upload"===i?Object(Y.jsx)("form",{children:Object(Y.jsxs)(sn,{type:i,children:[Object(Y.jsx)(dn,{type:"text",placeholder:"Enter title",onChange:function(n){return O(n.target.value)}}),Object(Y.jsx)("button",{type:"submit",style:{display:"none"},ref:y,onClick:function(n){n.preventDefault(),a(yn(x||j.name)),a($()),a(hn())}})]})}):Object(Y.jsxs)(sn,{type:i,children:[Object(Y.jsx)(un,{children:s.name}),Object(Y.jsx)(un,{children:Object(Y.jsx)("time",{children:u})}),Object(Y.jsx)(un,{children:Object(Y.jsx)(ln,{onClick:function(){return a(kn("crop"))},children:"Crop Mode"})})]})]}),Object(Y.jsx)(jn,{"aria-label":"Close modal",onClick:function(){S()}}),b?Object(Y.jsx)(pn,{onClick:function(){return y.current.click()}}):null]})})})}):null})},$n=L.b.div(k||(k=Object(K.a)(["\n\n"]))),_n=L.b.div(C||(C=Object(K.a)(["\n\n"]))),Zn=Object(L.b)(_n)(S||(S=Object(K.a)(["\n\n"]))),ne=Object(L.b)(_n)(z||(z=Object(K.a)(["\n\n"]))),ee=L.b.form(D||(D=Object(K.a)(["\n    margin: 30px auto 10px;\n    text-align: center;\n"]))),te=L.b.label(R||(R=Object(K.a)(["\n    display: block;\n    width: 30px;\n    height: 30px;\n    border: 1px solid var(--primary);\n    border-radius: 50%;\n    margin: 10px auto;\n    line-height: 30px;\n    color: var(--primary);\n    font-weight: bold;\n    font-size: 24px;\n\n    :hover{\n        background: var(--primary);\n        color: white;\n        cursor:pointer;\n    }\n\n    >input {\n        height: 0;\n        width: 0;\n        opacity: 0;\n    }\n"]))),re=function(){var n=Object(V.b)(),e=Object(V.c)(_),t=Object(V.c)(Cn),r=Object(B.useState)(null),i=Object(N.a)(r,2),a=i[0],c=i[1],o=a?Zn:ne;return Object(Y.jsxs)(ee,{children:[Object(Y.jsxs)(te,{children:[Object(Y.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0];t&&"image"===t.type.substr(0,5)?(n(vn(t)),n(hn()),c(null)):c("Please choose an image file")}}),Object(Y.jsx)("span",{children:"+"})]}),Object(Y.jsx)($n,{children:Object(Y.jsxs)(o,{children:[t?Object(Y.jsx)(Qn,{type:"upload"}):null,t&&e&&Object(Y.jsx)(Pn,{})]})})]})},ie=t(8),ae=function(n){var e=Object(B.useState)(null),t=Object(N.a)(e,2),r=t[0],i=t[1];return Object(B.useEffect)((function(){var e=Kn.collection(n).orderBy("createdAt","desc").onSnapshot((function(n){var e=[];n.forEach((function(n){e.push(Object(ie.a)(Object(ie.a)({},n.data()),{},{id:n.id}))})),i(e)}));return function(){return e()}}),[n]),{docs:r}},ce=L.b.div(E||(E=Object(K.a)(["\n    margin: 20px auto;\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    grid-gap: 40px;\n"]))),oe=L.b.div(A||(A=Object(K.a)(["    \n    cursor: pointer;\n    height:15%;\n    width:100%;\n    display:none;\n    justify-content:center;\n    position:absolute;\n    background-color:rgba(0,0,0,0.5);\n    bottom:0;\n\n    :hover{\n        background-color:black;\n    }\n"]))),se=Object(L.b)(nn.b)(I||(I=Object(K.a)(["\n    width:36px;\n    height:36px;\n    padding:5px;\n    border-radius:999px;\n    color:red;\n"]))),ue=L.b.div(F||(F=Object(K.a)(["\n    overflow: hidden;\n    height: 0;\n    opacity: 0.8;\n    cursor:pointer;\n    width:300px;\n    height:300px;\n    position:relative;\n\n    >img{\n        height:100%;\n        width:100%;\n        object-fit:contain;\n    }\n\n    :hover ","{\n        display:flex\n    }    \n"])),oe),le=function(){var n=Object(In.a)(An.a.mark((function n(e,t){var r,i,a=arguments;return An.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=a.length>2&&void 0!==a[2]?a[2]:"PNG",(i=new Image).crossOrigin="Anonymous",i.onload=function(){var n,e=document.createElement("CANVAS"),a=e.getContext("2d");e.height=i.height,e.width=i.width,a.drawImage(i,0,0),n=e.toDataURL(r),t(n),e=null},i.src=e;case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),de=function(){var n=ae("images").docs,e=Object(B.useState)(!1),t=Object(N.a)(e,2),r=(t[0],t[1]),i=Object(V.b)(),a=function(){var n=Object(In.a)(An.a.mark((function n(e){return An.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,le(e.url,(function(n){i(wn(Object(ie.a)(Object(ie.a)({},e),{},{url:n})))}));case 2:i(yn(e.name)),i(hn());case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c=function(){var n=Object(In.a)(An.a.mark((function n(e){return An.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("details : ",e),n.next=3,Yn(e,e.id);case 3:n.sent&&r((function(n){return!n}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(B.useEffect)((function(){}),[r]),Object(Y.jsx)(ce,{children:n&&n.map((function(n){return Object(Y.jsxs)(ue,{id:n.id,children:[Object(Y.jsx)(oe,{onClick:function(){return c(n)},children:Object(Y.jsx)(se,{children:"Shit"})}),Object(Y.jsx)("img",{onClick:function(){return a(n)},src:n.url,alt:"uploaded pic"})]},n.id)}))})},be=L.b.div(M||(M=Object(K.a)(["\n    max-width: 960px;\n    margin: 0 auto;\n"])));var pe=function(){var n=Object(V.c)(Sn);return Object(B.useEffect)((function(){}),[n]),Object(Y.jsxs)(be,{children:[Object(Y.jsx)(J,{}),Object(Y.jsx)(re,{}),n?Object(Y.jsx)(Qn,{type:"display"}):Object(Y.jsx)(de,{})]})},je=Object(q.a)({reducer:{image:Rn,modal:On,extra:Z}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));H.a.render(Object(Y.jsx)(U.a.StrictMode,{children:Object(Y.jsx)(V.a,{store:je,children:Object(Y.jsx)(pe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()}))}},[[80,1,2]]]);
//# sourceMappingURL=main.d85af2e4.chunk.js.map